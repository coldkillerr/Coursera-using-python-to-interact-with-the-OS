<h1> Files in python </h1>


Data is usually stored on a disk and saved in
files which are held in
containers called directories or folders.
File systems are usually organized in
a tree structure with directories
and files nested under their parents. 

<h2> Reading Files </h2>

<h3>Opening files :</h3>

```python3
>>> file = open('new.txt')
```

<b>File Descriptor</b> is a token generated by the OS
that allows programs to do more operations with the file.
In Python, this file descriptor is
stored as an attribute of the files object.
The file object gives us a bunch of
methods that we can use to operate with the file.
Now, with this file object,
we can read the contents
of the file and print them to the screen. 

<h3>Reading Contents of the file :</h3>

``` python3
>>> file=open('hello.py')
>>> print(file.readline())
print("Hello world")
```
`readline()` reads a single line at a time from the file object.And if called again it would read the nextline

```python3
>>> file=open('usage_check.py')
>>> print(file.read())

import psutil
import shutil

def disk_usage(disk):
	du=shutil.disk_usage(disk)
	free_percentage = 100*(du.free / du.total)
	return free_percentage

def cpu_usage():
	usage=psutil.cpu_percent(1)
	return usage


if __name__ == '__main__':
	print('disk usage: ',disk_usage('/'),'percent')
	print('cpu usage: ',cpu_usage(),'percent')

>>> 
```

`file.read()` reads the complete file till the end of the file unlike `readline()` from the current location of the pointer.

<h3> Closing Files </h3>

```python3
>>> file.close()
>>> 
```

<h3> With method </h3>

```python3
>>> with open('usage_check.py') as file :
...     print(file.read())
... 

import psutil
import shutil

def disk_usage(disk):
	du=shutil.disk_usage(disk)
	free_percentage = 100*(du.free / du.total)
	return free_percentage

def cpu_usage():
	usage=psutil.cpu_percent(1)
	return usage


if __name__ == '__main__':
	print('disk usage: ',disk_usage('/'),'percent')
	print('cpu usage: ',cpu_usage(),'percent')

>>> 

```
Using `with` keyword you don't need to close the files .

<h2> Iterating Through Files </h2>

<h3> Example : </h3>

```python3
>>> with open('usage_check.py') as file :
...     for line in file:
...             print(line.upper().strip())
... 


IMPORT PSUTIL
IMPORT SHUTIL

DEF DISK_USAGE(DISK):
DU=SHUTIL.DISK_USAGE(DISK)
FREE_PERCENTAGE = 100*(DU.FREE / DU.TOTAL)
RETURN FREE_PERCENTAGE

DEF CPU_USAGE():
USAGE=PSUTIL.CPU_PERCENT(1)
RETURN USAGE


IF __NAME__ == '__MAIN__':
PRINT('DISK USAGE: ',DISK_USAGE('/'),'PERCENT')
PRINT('CPU USAGE: ',CPU_USAGE(),'PERCENT')
>>> 
```

<h3> Saving lines in a list </h3>

```python3
>>> file=open('usage_check.py')
>>> lines=file.readlines()
>>> print(lines)
['\n', '#!/usr/env/bin/env python3\n', '\n', 'import psutil\n', 'import shutil\n', '\n', 'def disk_usage(disk):\n', '\tdu=shutil.disk_usage(disk)\n', '\tfree_percentage = 100*(du.free / du.total)\n', '\treturn free_percentage\n', '\n', 'def cpu_usage():\n', '\tusage=psutil.cpu_percent(1)\n', '\treturn usage\n', '\n', '\n', "if __name__ == '__main__':\n", "\tprint('disk usage: ',disk_usage('/'),'percent')\n", "\tprint('cpu usage: ',cpu_usage(),'percent')\n"]
>>> 
```

using `readlines` we can save the lines in a list and perform the required operations.

<h2> Writing Files </h2>

<h3> Different modes to open a file </h3>


| Character 	| Meaning 	|
|:-:	|:-:	|
| 'r' 	| open for reading (default) 	|
| 'w' 	| open for writing, truncating the file first 	|
| 'x' 	| open for exclusive creation, failing if the file already exists 	|
| 'a' 	| open for writing, appending to the end of the file if it exists 	|
| 'b' 	| binary mode 	|
| 't' 	| text mode (default) 	|
| '+' 	| open for updating (reading and writing) 	|

The default mode is 'r' (open for reading text, synonym of 'rt'). Modes 'w+' and 'w+b' open and truncate the file. Modes 'r+' and 'r+b' open the file with no truncation.

<h3> Writing to a file </h3>

```python3
>>> with open('novel.txt','w') as file :
...     file.write('the beginning')
... 
13
>>> 

```

<h2> Working with files </h2>

<h3> Deleting files in the current working directory </h3>

Using `os.remove()` :

```python3
>>> import os
>>> os.remove('novel.txt')
>>> os.remove('novel.txt')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
FileNotFoundError: [Errno 2] No such file or directory: 'novel.txt'
>>> 
```
<h3> Renaming Files </h3>

Basic syntax :
`os.rename('oldname','newname')`


```python3
>>> import os
>>> os.rename('new.txt','old.txt')
>>> 
```

<h3> Checking if Files exist </h3>

```python3
>>> os.path.exists('old.txt')
True
>>> os.path.exists('new.txt')
False
>>> 
```

<h2> Getting File Info </h2>

```python3
>>> os.path.getsize('old.txt') #filesize
8
>>> os.path.getmtime('old.txt') #timestamp when the file was changed since jan 1st 1970
1594208580.9203212
>>> import datetime
>>> timestamp=os.path.getmtime('old.txt')
>>> datetime.datetime.fromtimestamp(timestamp)
datetime.datetime(2020, 7, 8, 17, 13, 0, 920321)
>>> 
>>> os.path.abspath('old.txt') #get absolute path
'/home/nishit/old.txt'
>>> 

```

<h2> Working With directories </h2>

<h3> Current Working Directory </h3>

```python3
>>> os.getcwd()
'/home/nishit'
>>> 
```

<h3> Making new directory </h3>

```python3
>>> os.mkdir('new_dir')
>>> 
```
`os.mkdir()` makes a new directory in the current working directory.

<h3> Changing directory </h3>

```python3
>>> os.chdir('new_dir')
>>> os.getcwd()
'/home/nishit/new_dir'
>>> 
```
`chdir` changes to the cwd to new directory .


<h3> Removing directory </h3>

```python3
>>> os.rmdir('new_dir')
```
`rmdir()` deletes directory only when it is completely empty.
For this we use `os.listdir()` which lists all the files in a directory

```
>>> os.listdir('new_dir')
[]
>>> 

```





